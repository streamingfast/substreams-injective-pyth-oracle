specVersion: v0.1.0
package:
  name: pyth_oracle_price
  version: v0.1.0

imports:
  injective: https://spkg.io/streamingfast/injective-common-v0.2.2.spkg

protobuf:
  excludePaths:
    - sf/substreams
    - google
    - amino
    - gogoproto
    - cosmos/msg/v1

binaries:
  default:
    type: wasm/rust-v1
    file: ./target/wasm32-unknown-unknown/release/substreams.wasm

modules:
  - name: map_events
    use: injective:filtered_events
    initialBlock: 30749339

  - name: store_oracle_prices
    kind: store
    initialBlock: 30749339
    inputs:
      - map: map_events
    output:
     type: proto:mydata.v1.MyData
    updatePolicy: set
    valueType: string

params:
  map_events: type:injective.oracle.v1beta1.EventSetPythPrices

network: injective-mainnet

